# An Interactive Guide to Modern Cookery

### Introduction
**An Interactive Guide to Modern Cookery** takes its name from the cookbook it draws upon, grounding the project in a rich culinary tradition while
reimagining how we interact with recipe collections. This technical exploration and functional prototype leverages modern natural language 
processing and retrieval techniques to transform static recipe texts into a searchable, conversational experience.

At its core, this guide uses Retrieval Augmented Generation (RAG) to allow users to query recipes and cooking techniques naturally, receiving 
helpful, context-aware responses generated by a language model. Behind the scenes, recipes are extracted from scanned PDF cookbooks, structured 
into machine-readable formats, embedded into a vector database, and retrieved based on semantic relevance.

Whether you're a curious home cook, a developer interested in language models, or a culinary historian exploring digital interfaces for classic 
texts, this project offers a glimpse into how AI can enhance the accessibility and personalization of culinary knowledge.

### Setup Instructions
Requirements: 
- 670 MB space for `mxbai-embed-large:latest`.
- 4.7 GB space for `llama3:latest`.
- A computer capable of running large language models (recommended: 16 GB RAM or more, modern CPU, optional GPU acceleration).

Steps:
1. Install Python >= 3.9.16.
2. Install the dependencies in `requirements.txt`. Optionally, but recommended, create a Python virtual environment for this purpose.
3. Install the latest version of [Ollama](https://ollama.com/).
4. Use Ollama to pull the models via the following terminal commands:
    - `Ollama pull mxbai-embed-large:latest`
    - `Ollama pull llama3:latest`
5. Run `app.py` and navigate with a web browser to the given address to use the app


### A Guide To What's Been Done
1) Data Extraction from PDFs of Cookbooks 
    - Extracted recipes and stored them in a structured manner. 
        - Extracted text using `PyMuPDF`.
        - Identified recipes and key information using Python's Regular Expression module `re`.
        - Stored recipes using JSON format.
    - See `data extraction.ipynb`.

2) Implemented Retrieval Augmented Generation (RAG). 
    - Stored the structured recipes in a vector database.
        - Used `ChromaDB`.
    - Used embedding models to index and retrieve relevant recipes based on user queries.
        - Embeddings computed via `mxbai-embed-large:latest` and `Ollama`.
    - Used retrieved data and an LLM to generate responses.
        - Responses generated via `llama3:latest` and `Ollama`.
    - See `rag.ipynb`.

3) Frontend and UI
    - Built a basic chat interface using `Gradio`.


### Future plans: 
- Typo fixes for the OCR of the original document.
    - Will use SymSpell to handle multilingual text by combining the French and English frequency dictionaries.
- NER on the recipes for filtering based on ingredients and methods (requires the Typo fixes first).
- Develop tests to quantify retrieval and compare various models and embedding methods. Will consider using LLM-as-a-judge.
- Compare different embedding models.
- Compare different LLM models.
- Evaluate the necessity of a chunking method for longer recipes. As of now, it seems unnecessary considering most recipes are approximately a paragraph. 
- Add a chat history for developing recipes
- Add a feature for users to save recipes they've developed.
- Add a feature to load saved recipes for further development or modification.
- Find other public domain cookbooks for other cuisines (e.g. if Marcella Hazan's "Essentials of Italian Cooking" were public domain). May look into Wikipedia's archive of recipes.
